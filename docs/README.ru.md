# PolyChat™ – Obsidian Plugin

[![Release](https://img.shields.io/github/v/release/semernyakov/polychat?style=flat-square&label=Release)](https://github.com/semernyakov/polychat/releases/latest)
[![Downloads](https://img.shields.io/github/downloads/semernyakov/polychat/total?style=flat-square&label=Downloads)](https://github.com/semernyakov/polychat/releases)
[![License](https://img.shields.io/github/license/semernyakov/polychat?style=flat-square&label=License)](LICENSE)
[![Tests](https://img.shields.io/github/actions/workflow/status/semernyakov/polychat/ci.yml?branch=master&style=flat-square&label=Tests)](https://github.com/semernyakov/polychat/actions/workflows/ci.yml)
[![NPM](https://img.shields.io/npm/v/groq-poly-chat?style=flat-square&label=NPM)](https://www.npmjs.com/package/groq-poly-chat)
[![Contributor Covenant](https://img.shields.io/badge/Contributor%20Covenant-2.1-4baaaa?style=flat-square&label=Contributor%20Covenant)](CODE_OF_CONDUCT.md)

<!-- [![Покрытие](https://img.shields.io/codecov/c/github/semernyakov/groq-chat-plugin?style=flat-square&label=покрытие)](https://codecov.io/gh/semernyakov/groq-chat-plugin) -->

[English version](../README.md)

**PolyChat™** — мощный плагин для [Obsidian](https://obsidian.md), который интегрирует возможности Groq AI непосредственно в ваше рабочее пространство.

Используйте передовые языковые модели для улучшения вашего рабочего процесса в Obsidian.

## Содержание

- [Скриншоты](#скриншоты)
- [Возможности](#возможности)
- [Установка](#установка)
- [Настройка](#настройка)
- [Использование](#использование)
- [Разработка](#разработка)
- [Проверка устаревших моделей](#проверка-устаревших-моделей)
- [Поддержка моделей](#-поддержка-моделей)
- [Участие в разработке](#участие-в-разработке)
- [Безопасность](#безопасность)
- [Лицензия](#лицензия)
- [Поддержка](#поддержка)
- [История изменений](#история-изменений)
- [Устранение неполадок](#-устранение-неполадок)

## Скриншоты

**Основной интерфейс**

![polychat-main.png](polychat-main.png)

**Интерфейс настроек**

![polychat-settings.png](polychat-settings.png)

## Возможности

- Прямая интеграция с моделями Groq AI
- Динамический список моделей: модели обновляются в реальном времени, всегда актуальны
- Диалоговое окно модели: подробная информация о каждой модели (название, описание, разработчик, макс. токенов, статус релиза и т.д.)
- Поддержка текстовых, vision (изображения), coder и audio моделей
- Локализация интерфейса (русский/английский) - автоматически определяет язык Obsidian
- Поддержка форматирования Markdown и подсветка кода
- Поддержка мобильных устройств
- Выбор пользовательских моделей с группировкой по владельцам моделей
- История чата с несколькими вариантами хранения:
  - Хранение в памяти
  - localStorage
  - IndexedDB
  - Хранение в файле
- Настраиваемая длина истории и поведение загрузки
- Контекстно-зависимые ответы
- Переключатель просмотра Raw/Markdown для сообщений ассистента
- Настраиваемый режим отображения по умолчанию (вкладка или боковая панель)
- Диалог поддержки со ссылками на донаты
- Горячие клавиши и расширенные настройки
- Безопасное хранение API ключа
- Настройка температуры и максимального количества токенов
- Массовая активация/деактивация моделей
- Открытый исходный код и поддержка сообщества

## Установка

1. Откройте настройки Obsidian
2. Перейдите в раздел Community Plugins и отключите безопасный режим
3. Нажмите "Обзор" и найдите "PolyChat"
4. Установите плагин
5. Включите плагин в разделе Community Plugins

## Настройка

1. Получите API ключ на [Groq Console](https://console.groq.com)
2. Откройте настройки плагина в Obsidian
3. Введите ваш API ключ
4. Настройте дополнительные параметры по необходимости (Примечание: Настройки были обновлены, включая опции для режима отображения по умолчанию и хранения истории. Подробности см. в настройках плагина.)

## Использование

1. Откройте любую заметку
2. Нажмите на иконку PolyChat в боковой панели
3. Начните общение с AI
4. Используйте команды с `/` для дополнительных функций **(не реализовано!)**

## Разработка

````bash
# Клонировать репозиторий
git clone https://github.com/semernyakov/polychat.git

# Установить зависимости
npm install

# Собрать плагин
npm run build

# Проверить стиль кода
npm run lint

# Проверка устаревших моделей

Скрипт `check_obsolete_models.ts` проверяет, не использует ли плагин устаревшие модели Groq и помогает поддерживать совместимость с последними доступными моделями.

## Как использовать

### Быстрый старт (рекомендуемый способ)

```bash
# Показать справку и доступные опции
npm run check-models -- --help

# Проверить модели в стандартном расположении
npm run check-models

# Проверить с указанием пути к настройкам плагина (Linux/macOS)
npm run check-models -- --plugin-data-dir=~/.config/obsidian/plugins/groq-chat-plugin/data

# Проверить с указанием пути к настройкам плагина (Windows)
npm run check-models -- --plugin-data-dir=%APPDATA%\\obsidian\\plugins\\groq-chat-plugin\\data

# Вывести список всех доступных моделей (включая устаревшие)
npm run check-models -- --list-all

# Запустить с выводом на английском языке
npm run check-models -- --lang=en
````

### Дополнительные опции

1. **Указать каталог настроек Obsidian** (если известен путь к `.obsidian`):

   ```bash
   npm run check-models -- --config-dir=~/.config/obsidian
   ```

2. **Использовать переменные окружения** (полезно для скриптов):

   ```bash
   OBSIDIAN_VAULT_PATH=~/.config/obsidian \
   npm run check-models
   ```

3. **Режим разработки** (использует пути по умолчанию):
   ```bash
   NODE_ENV=development npm run check-models
   ```

### Где найти настройки плагина?

Настройки плагина обычно находятся в одном из этих мест:

- **Linux**: `~/.config/obsidian/plugins/groq-chat-plugin/data/settings.json`
- **Windows**: `%APPDATA%\\obsidian\\plugins\\groq-chat-plugin\\data\\settings.json`
- **macOS**: `~/Library/Application Support/obsidian/plugins/groq-chat-plugin/data/settings.json`

### Что делает скрипт?

1. Находит файл настроек плагина
2. Проверяет, какие модели указаны в настройках
3. Сравнивает их с актуальным списком моделей Groq
4. Определяет устаревшие модели, которые следует заменить
5. Обнаруживает неизвестные модели, которых нет в официальном списке
6. Предоставляет рекомендации по замене моделей, когда это возможно

## Участие в разработке

Мы приветствуем ваше участие! Пожалуйста, прочтите наше [Руководство по участию](docs/CONTRIBUTING.ru.md) для получения информации о кодексе поведения и процессе отправки pull request'ов.

## Безопасность

По вопросам безопасности, пожалуйста, ознакомьтесь с нашей [Политикой безопасности](docs/SECURITY.ru.md) и сообщайте об уязвимостях ответственно.

## Лицензия

Этот проект лицензирован под MIT License - см. файл [LICENSE](LICENSE) для подробностей.

## Поддержка

Если вы находите этот плагин полезным, рассмотрите возможность:

- [Поставить звезду репозиторию](https://github.com/semernyakov/polychat)
- [Поддержать разработку](https://github.com/sponsors/semernyakov)
- [Сообщить о проблеме](https://github.com/semernyakov/polychat/issues)

## История изменений

См. [CHANGELOG.ru.md](docs/CHANGELOG.ru.md) для всех изменений.

## 📝 Описание

PolyChat Plugin - это мощный плагин для Obsidian, который интегрирует возможности Groq AI непосредственно в ваше рабочее пространство. Используйте передовые языковые модели для улучшения вашего рабочего процесса в Obsidian.

## 🤖 Поддержка моделей

- "Allam 2 7B"
- "DeepSeek R1 Distill Llama 70B"
- "DeepSeek R1 Distill Qwen 32B"
- "Gemma 2 9B IT"
- "Llama 3.1 8B Instant"
- "Llama 3.2 1B Preview"
- "Llama 3.2 3B Preview"
- "Llama 3.3 70B SpecDec"
- "Llama 3.3 70B Versatile"
- "Llama Guard 3 8B"
- "Llama 3 70B"
- "Llama 3 8B"
- "Meta Llama 4 Maverick 17B 128E Instruct"
- "Mistral Saba 24B"
- "Qwen 2.5 32B"
- "Qwen 2.5 Coder 32B"
- "Qwen QwQ 32B"

> Полный и актуальный список всегда отображается в настройках плагина. Описания будут добавлены по мере появления.

- 🔐 Безопасное хранение API ключей
- 💬 Интерактивный чат-интерфейс
- 📚 Сохранение истории диалогов
- 🌓 Поддержка светлой и темной темы
- ⚡ Быстрый доступ через боковую панель
- 🔄 Переключение вида сообщений: Просмотр отформатированного Markdown или исходного Raw текста ответа.

## 🚀 Установка

1. Откройте Obsidian
2. Перейдите в Настройки → Сторонние плагины
3. Нажмите "Просмотреть" и найдите "PolyChat"
4. Установите плагин
5. Включите плагин в списке установленных

## ⚙️ Настройка

### Настройка API ключа

1. Получите API ключ на [console.groq.com](https://console.groq.com)
2. Введите ключ в настройках плагина
3. Сохраните настройки

### Настройка моделей

- Выберите модель в зависимости от задачи
- Настройте параметры модели (температура, максимальное количество токенов)
- Сохраните настройки модели

### Дополнительные настройки

- Настройка хранения и максимальной длины истории (в памяти, localStorage, IndexedDB, файл).
- Настройка режима отображения по умолчанию (вкладка или боковая панель).

## 💡 Использование

1. **Открытие чата:**
   - Нажмите на иконку чата в боковой панели
   - Используйте горячую клавишу `Ctrl+P` (или `Cmd+P` на Mac) и введите "PolyChat"
   - Откройте чат через палитру команд

2. **Отправка запросов:**
   - Введите запрос в поле ввода
   - Нажмите Enter или кнопку отправки
   - Используйте `Shift+Enter` для переноса строки

3. **Работа с моделями:**
   - Выберите модель в зависимости от задачи
   - Учитывайте ограничения контекста

## ⌨️ Горячие клавиши

| Действие            | Windows/Linux | macOS         |
| ------------------- | ------------- | ------------- |
| Отправить сообщение | Ctrl + Enter  | Enter         |
| Новая строка        | Shift + Enter | Shift + Enter |

## 🔒 Безопасность

- Все токены хранятся локально в зашифрованном виде

## 🐛 Устранение неполадок

### Распространенные проблемы:

1. **Ошибка авторизации:**
   - Проверьте правильность Client ID
   - Убедитесь, что redirect URI настроен корректно
   - Проверьте подключение к интернету

2. **Ошибка API:**
   - Проверьте статус сервиса Groq
   - Убедитесь в действительности токена
   - Проверьте лимиты использования

3. **Проблемы с моделями:**
   - Убедитесь, что выбрана подходящая модель
   - Проверьте ограничения контекста
   - Для preview моделей возможны перебои

## 🤝 Вклад в развитие

Мы приветствуем вклад в развитие проекта! Для участия:

1. Форкните репозиторий
2. Создайте ветку для вашей функции
3. Внесите изменения
4. Отправьте Pull Request

Подробнее смотрите в [CONTRIBUTING.md](docs/CONTRIBUTING.md).

## 📄 Лицензия

MIT License. См. файл [LICENSE](LICENSE) для подробностей.

## 💸 Поддержать разработчика

Если проект вам полезен, поддержите развитие через YooMoney:

- [YooMoney](https://yoomoney.ru/fundraise/194GT5A5R07.250321)

## 🙏 Благодарности

- Команде Obsidian за отличную платформу
- Groq за предоставление API
- Спасибо Автору и контрибьюторам за помощь в развитии

## 📞 Поддержка

- [Создать Issue](https://github.com/semernyakov/polychat/issues)
- [Документация](docs/PUBLISHING.ru.md)
- [Код проекта](https://github.com/semernyakov/polychat)

---

Создано с ❤️ для сообщества Obsidian, [
поддержка автора](https://yoomoney.ru/fundraise/194GT5A5R07.250321)
